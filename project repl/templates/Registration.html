<!DOCTYPE html>
<html>
     <head>
       <style>
         html{
               background-image: url('/static/images/bg login.jpg');
               background-repeat: no-repeat;
               background-attachment:fixed ;
               background-size: cover;
               height:100%;
          } */
           header{
            position:absolute;
          }
          .container-fluid{
            top: 10px;;
            position:absolute;
            width:100%;
            background:transparent;
          }
          .col{
            top:100px;
            position: absolute;
          }
          .card{

          }
       </style>
          <meta charset="utf-8">
          <meta name="viewport" content="width=device-width, initial-scale=1">
          <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css')}}">
          
          
          <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
     </head>
     <body>
          <nav class="navbar navbar-expand-lg bg-body-tertiary" style="padding-top:0%; padding-bottom:0%">
               <div class="container-fluid" style="background:transparent;">
                    
                    <a class="navbar-brand" href="#" id="appName">MUSIC STREAMING APP</a>
                    <button  class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation" style="border:0px;">
                         <a href="AdminLogin.html" style="text-decoration: none;color:black;border:none;" id="adminLogin">Admin login</a>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
                         
                         <ul style="float: left;"class="navbar-nav me-auto mb-2 mb-lg-0">
                              <li class="nav-item">
                              <a  class="nav-link active" aria-current="page" href="/adminLogin" id="adminLogin">Admin Login</a>
                              </li>
                              
                         </ul>
                    </div>
               </div>
          </nav>
          <div class="main">
               <div class="row" style="display:flex;justify-content:right;">
                    
                    <div class="col" style="width: 40%;">
                         <div class="card text-center" style="margin:10px;border-radius:10px;" id="login-card">
                              <div class="card-body" > 
                                   <div class="card-title">
                                        <h3>Sign up</h3>
                                   </div>
                                   <div class="card-text" style="color:black">
                                     {%if(error1)%}
                                     <div class="alert alert-danger align-items-center" role="alert">
                                       
                                       <div>
                                         UserName already exists try another name
                                       </div>
                                     </div>
                                     {%endif%}
                                     {%if(error2)%}
                                     <div class="alert alert-danger  align-items-center" role="alert">
                                       
                                       <div>
                                         email already exists try another email
                                       </div>
                                     </div>
                                     {%endif%}
                                       <form  action="/UserRegistration" method="POST"  id="myForm"> 
                                        <div class="form-floating mb-3" id="Name">
                                             <input type="text" class="form-control" id="floatingInput1"  placeholder="name@example.com" name="Name" required>
                                             <label for="floatingInput">Name</label>
                                        </div>

                                        <div class="form-floating mb-3" id="email" >
                                             <input type="email" class="form-control" id="floatingInput2"  placeholder="name@example.com" name="email" required>
                                             <label for="floatingInput">Email address</label>
                                        </div>
                                        
                                        <div class="form-floating" style="margin-bottom:16px ;" id="pw" >
                                             <input type="password" class="form-control" id="floatingPassword1" placeholder="Password"  name="password" required>
                                             <label for="floatingPassword">Password</label>
                                        </div>

                                        <div class="form-floating" id="rpw">
                                             <input type="password" class="form-control" id="floatingPassword2" placeholder="Password" required>
                                             <label for="floatingPassword">Repeat Password</label>
                                        </div>
                                     
                                        <p style="color:white;"> Already have an account? <a href="/">Login</a></p>
                                        <p style="color:white;">password must contain following:</p>
                                        <div style="display:flex;text-align: left;color:white;">
                                             
                                             <br>
                                             <div>
                                                  <ol>
                                                       <li>password should be atleast 8 letters long.</li> 
                                                       <li>password should not contain your Name.</li>
                                                       <li>password should be combination of upper case and lower case alphabets and numbers.</li>
                                                       <li>password should contain atleast one special character.</li>
                                                  </ol>
                                             </div>
                                             
                                        </div>
                                        <br>
                                        <button type="submit" class="btn btn-primary"  id="submitButton" >Submit</button>
                                       </form>
                                       <div style="margin: 5px;">
                                        <button class="btn btn-primary" id="Show">Show password</button>
                                      </div>
                                   </div>
                                   
                              </div>
                         </div>
                    </div>
                    
               </div>
          </div>
       <script>
          document.addEventListener('DOMContentLoaded', function() {
               var form = document.getElementById('myForm');
               var submitButton = document.getElementById('submitButton');
                 
               let show =document.getElementById('Show');
               let count=0;
               show.addEventListener('click',function(event){
                         let pw=document.getElementById("floatingPassword1").value;
                         let rpw=document.getElementById("floatingPassword2").value;
                         let pwVal=pw.value;
                         let divpw=document.getElementById("pw");
                         let divrpw=document.getElementById("rpw");
                         if(count===0){
                              count+=1;
                              divpw.innerHTML=`
                                             <input type="text" class="form-control" id="floatingPassword1" placeholder="Password" name="password" value=${pw}>
                                             <label for="floatingPassword">Password</label>
                                             `
                              divrpw.innerHTML=`
                                             <input type="text" class="form-control" id="floatingPassword2" name="password" placeholder="Password" value=${rpw}>
                                             <label for="floatingPassword">Password</label>
                                             `
                         }
                         else{
                              count-=1;
                              divpw.innerHTML=`
                                             <input type="password" class="form-control" id="floatingPassword1" placeholder="Password" name="Password" value=${pw}>
                                             <label for="floatingPassword">Password</label>
                                             `
                              divrpw.innerHTML=`
                                             <input type="password" class="form-control" id="floatingPassword2" placeholder="Password" value=${rpw}>
                                             <label for="floatingPassword">Password</label>
                                             `
                         }
                         
                    })

                 submitButton.addEventListener('click', function(event) {
                    let name=document.getElementById("floatingInput1").value;
                    let pw=document.getElementById("floatingPassword1").value;
                    let rpw=document.getElementById("floatingPassword2").value;
                    let email=document.getElementById("floatingInput2").value;
                    let divEmail=document.getElementById("email");
                    let divName=document.getElementById("Name");
                    let divpw=document.getElementById("pw");
                    let divrpw=document.getElementById("rpw");


                    const regex = /[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;
                    console.log(pw,rpw,name,email)

                    if(name===""){
                         console.log("name error")
                         divName.innerHTML=`<input type="text" class="form-control is-invalid" id="floatingInput1" placeholder="name@example.com" name="Name">
                         <label for="floatingInputInvalid">Name is required</label>`;
                         event.preventDefault();

                    }
                    else{
                         divName.innerHTML=`<input type="text" class="form-control" id="floatingInput1" placeholder="name@example.com" name="Name" value=${name}>
                         <label for="floatingInput">Name</label>`;
                         
                    }
                    if(!email.includes("@")){

                         divEmail.innerHTML=`<input type="email" class="form-control is-invalid" id="floatingInput2" placeholder="name@example.com" name="email">
                         <label for="floatingInputInvalid">Invalid Email</label>`;
                         event.preventDefault();
                    }
                    else{
                         divEmail.innerHTML=`<input type="email" class="form-control" id="floatingInput2" placeholder="name@example.com" name="email" value=${email} >
                         <label for="floatingInput">Email address</label>`;
                         
                    }
                    if(pw.length<8){

                         divpw.innerHTML=`<input type="password" class="form-control is-invalid" id="floatingPassword1" placeholder="name@example.com" name="password" value=${pw}>
                         <label for="floatingInputInvalid">No. of charecters must be 8 or more</label>`;
                         event.preventDefault();
                    }

                    else if(pw===pw.toUpperCase() || pw===pw.toLowerCase()){

                         divpw.innerHTML=(`<input type="password" class="form-control is-invalid" id="floatingPassword1" placeholder="name@example.com" name="password" value=${pw}>
                         <label for="floatingInputInvalid">must contain both uppercase and lowercase letters</label>`);
                         event.preventDefault();
                    }
                    else if(pw.includes(name) || pw.toLowerCase().includes(name.toLowerCase())|| pw.toUpperCase().includes(name.toUpperCase())){

                         divpw.innerHTML=(`<input type="password" class="form-control is-invalid" id="floatingPassword1" placeholder="name@example.com"name="password" value=${pw}>
                         <label for="floatingInputInvalid">password must not include your name</label>`);
                         event.preventDefault();
                    }
                    else if(!regex.test(pw)){

                         divpw.innerHTML=`<input type="password" class="form-control is-invalid" id="floatingPassword1" placeholder="name@example.com" name="password" value=${pw}>
                         <label for="floatingInputInvalid">password must contain a special character</label>`;
                         event.preventDefault();
                    }
                    else if(!(pw===rpw)){

                         divrpw.innerHTML=(`<input type="password" class="form-control is-invalid" id="floatingPassword2" placeholder="name@example.com" name="password" value=${rpw}>
                         <label for="floatingInputInvalid">repeat password is not same as password</label>`);
                         event.preventDefault();
                    }
                    else{
                         divpw.innerHTML=`<input type="password" class="form-control" id="floatingPassword1" placeholder="Password" name="password" value=${pw}>
                         <label for="floatingPassword">Password</label>`;
                         divrpw.innerHTML=`<input type="password" class="form-control" id="floatingPassword2" placeholder="Password" value=${rpw} >
                         <label for="floatingPassword">Repeat Password</label>`;
                         
                    }

                 });
               });
          
         
           
       </script>
       <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
     </body>
</html>